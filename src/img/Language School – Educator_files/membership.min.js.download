var facebookAppId;!function(e,t,o){var a=e.getElementsByTagName(t)[0];e.getElementById(o)||((e=e.createElement(t)).id=o,e.src="//connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(e,a))}(document,"script","facebook-jssdk"),(facebookAppId="undefined"!=typeof edgtSocialLoginVars?edgtSocialLoginVars.social.facebookAppId:facebookAppId)&&(window.fbAsyncInit=function(){FB.init({appId:facebookAppId,cookie:!0,xfbml:!0,version:"v2.8"}),window.FB=FB}),function(s){"use strict";var e={};function t(){var e=s(".edgt-modal-opener"),o=s(".edgt-modal-holder");e.length&&o.length&&(e.click(function(e){e.preventDefault();var t=s(this).data("modal");o.fadeOut(300),o.removeClass("opened"),o.each(function(){var e=s(this);"undefined"!==e.data("modal")&&e.data("modal")==t&&(e.fadeIn(300),e.addClass("opened"))})}),o.each(function(){var t=s(this);t.click(function(e){t.hasClass("opened")&&(t.fadeOut(300),t.removeClass("opened"))}),s(window).on("keyup",function(e){t.hasClass("opened")&&27==e.keyCode&&(t.fadeOut(300),t.removeClass("opened"))}),t.find(".edgt-modal-content").click(function(e){e.stopPropagation()})}))}function o(){s(".edgt-login-form").on("submit",function(e){e.preventDefault();e={action:"edgt_membership_login_user",security:s(this).find("#edgt-login-security").val(),login_data:s(this).serialize()};return s.ajax({type:"POST",data:e,url:edgtGlobalVars.vars.edgtAjaxUrl,success:function(e){e=JSON.parse(e);i(e),"success"==e.status&&(window.location=e.redirect)}}),!1})}function a(){s(".edgt-register-form").on("submit",function(e){e.preventDefault();e={action:"edgt_membership_register_user",security:s(this).find("#edgt-register-security").val(),register_data:s(this).serialize()};return s.ajax({type:"POST",data:e,url:edgtGlobalVars.vars.edgtAjaxUrl,success:function(e){e=JSON.parse(e);i(e),"success"==e.status&&(window.location=e.redirect)}}),!1})}function n(){var t=s(".edgt-reset-pass-form");t.submit(function(e){e.preventDefault();e={action:"edgt_membership_user_lost_password",user_login:t.find("#user_reset_password_login").val()};s.ajax({type:"POST",data:e,url:edgtGlobalVars.vars.edgtAjaxUrl,success:function(e){e=JSON.parse(e);i(e),"success"==e.status&&(window.location=e.redirect)}})})}function i(e){var t=s(".edgt-membership-response-holder"),o=_.template(s(".edgt-membership-response-template").html()),a="success"===e.status?"edgt-membership-message-succes":"edgt-membership-message-error",o=o({messageClass:a,message:e.message});t.html(o)}function d(){s(".edgt-facebook-login-holder").submit(function(e){e.preventDefault(),window.FB.login(function(e){"connected"===(e=e).status?(console.log("Welcome! Fetching information from Facebook..."),FB.api("/me","GET",{fields:"id, name, email, link, picture"},function(e){var t=s(".edgt-facebook-login-holder [name^=edgt_nonce_facebook_login]").val();e.nonce=t,e.image=e.picture.data.url,s.ajax({type:"POST",data:{action:"edgt_membership_check_facebook_user",response:e},url:edgtGlobalVars.vars.edgtAjaxUrl,success:function(e){e=JSON.parse(e);i(e),"success"==e.status&&(window.location=e.redirect)}})})):"not_authorized"===e.status?console.log("Please log into this app"):console.log("Please log into Facebook")},{scope:"email, public_profile"})})}function r(){var e;(e="undefined"!=typeof edgtSocialLoginVars?edgtSocialLoginVars.social.googleClientId:e)?gapi.load("auth2",function(){window.auth2=gapi.auth2.init({client_id:e}),s(".edgt-google-login-holder").submit(function(e){var t;e.preventDefault(),window.auth2.signIn(),window.auth2.isSignedIn.get()&&(e=window.auth2.currentUser.get().getBasicProfile(),t=s(".edgt-google-login-holder [name^=edgt_nonce_google_login]").val(),e={action:"edgt_membership_check_google_user",response:{id:e.getId(),name:e.getName(),email:e.getEmail(),image:e.getImageUrl(),link:"https://plus.google.com/"+e.getId(),nonce:t}},s.ajax({type:"POST",data:e,url:edgtGlobalVars.vars.edgtAjaxUrl,success:function(e){e=JSON.parse(e);i(e),"success"==e.status&&(window.location=e.redirect)}}))})}):s(".edgt-google-login-holder").submit(function(e){e.preventDefault()})}function l(){var o,a,n,e=s("#edgt-membership-update-profile-form");e.length&&(o=e.find("button"),a=o.data("updating-text"),n=o.data("updated-text"),e.on("submit",function(e){e.preventDefault();var t=o.html(),e=(o.html(a),{action:"edgt_membership_update_user_profile",data:s(this).serialize()});return s.ajax({type:"POST",data:e,url:edgtGlobalVars.vars.edgtAjaxUrl,success:function(e){e=JSON.parse(e);i(e),"success"==e.status?(o.html(n),window.location=e.redirect):o.html(t)}}),!1}))}"undefined"!=typeof edgt&&(edgt.modules.socialLogin=e),e.edgtUserLogin=o,e.edgtUserRegister=a,e.edgtUserLostPassword=n,e.edgtInitWidgetModal=t,e.edgtInitFacebookLogin=d,e.edgtInitGooglePlusLogin=r,e.edgtUpdateUserProfile=l,s(document).ready(function(){t(),o(),a(),n(),l()}),s(window).on("load",function(){d(),r(),function(){s(".edgt-membership-main-wrapper");var e=s(".page-template-user-dashboard .edgt-content"),t=s(".edgt-page-footer"),o=0;!edgt.body.hasClass("edgt-header-transparent")&&1024<edgt.windowWidth&&(o=o+edgtGlobalVars.vars.edgtMenuAreaHeight+edgtGlobalVars.vars.edgtLogoAreaHeight);0<t.length&&(o+=t.outerHeight());1024<edgt.windowWidth&&(t=edgt.windowHeight-o,e.css({"min-height":t+"px"}))}()}),s(window).resize(function(){}),s(window).scroll(function(){})}(jQuery);